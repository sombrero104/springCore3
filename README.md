# 스프링 핵심기술 (3편)
<br/>

# 스프링 AOP
Aspect-oriented Programming(AOP)는 OOP를 보완하는 수단으로, <br/>
흩어진 Aspect를 모듈화 할 수 있는 프로그래밍 기법. <br/>
<br/>

![aop](./images/aop.png)<br/>

## AOP 주요 개념
- Aspect(모듈)<br/>
어드바이스와 포인트컷을 합친 개념.<br/>
Aspect = Advice + Pointcut (해야할 일들을 어디에 적용?)<br/>
- Target(적용 대상 클래스)<br/>
- Advice(해야할 일들)<br/>
- Join point(합류점)<br/>
끼어들 수 있는 지점.<br/>
메서드 실행 시점을 흔하게 사용. (메서드 실행할 때 Advice를 끼워넣어라.)<br/>
생성자 호출 직전, 생성자 호출 했을 때, 필드에 접근하기 전, 필드에서 값을 가져갔을 때 등등<br/>
- Pointcut(어디에 적용)<br/>
Join point의 구체적인 sub set.<br/>
'A라는 클래스의 b라는 메서드를 호출할 때 적용해라.'<br/>

## AOP 구현체
- https://en.wikipedia.org/wiki/Aspect-oriented_programming <br/>
- 자바에서는 AspectJ, 스프링 AOP <br/>

## AOP 적용 방법
- 컴파일 타임<br/>
자바 파일을 클래스 파일로 만들 때 바이트코드들을 조작. 조작이 된 바이트코드를 생성해냄.<br/>
별도의 컴파일링이 더 필요.<br/>
바이트코드를 조작하여 클래스로 만들어버리므로, 로드 타임과 런 타임 시 성능에 영향이 없음.<br/>
- 로드 타임<br/>
A라는 자바 파일이 있을 때, 컴파일은 순수하게 A클래스 그 자체로 컴파일.<br/>
A클래스를 로딩하는 시점에 변경. 클래스 로딩 시점에 약간의 부하 발생. <br/>
로드 타임 위버를 설정해야 함. (로드 타임 자바 에이전트를 설정해줘야 함.)<br/>
AspectJ를 사용할 수 있으므로, 다양한 문법 사용 가능. <br/>
A클래스의 바이트코드 자체는 변경이 없지만, 로딩한 JVM 메모리 상에서는 어드바이스가 같이 있는 상태로 로딩됨.<br/>
> * 로드 타임 위빙: 로딩하는 클래스 정보를 변경하는 방법.
- 런 타임<br/>
프록시 기반의 AOP. 스프링 AOP가 사용하는 방법. <br/>
A라는 빈에 Aspect가 가진 어떠한 메소드(포인트컷)에 어드바이스를 적용해야 된다는 것을 스프링이 알고 있음. <br/>
이미 클래스는 읽은 후 런타임 과정에서 A라는 타입의 빈을 만들 때, A라는 타입의 프록시 빈을 만듬.(A라는 빈을 감싼 프록시 빈을 만듬.) <br/>

<br/><br/>

